import{j as e,r as a,s as N,c as b}from"./index-D59TgMuy.js";import{P as w,a as S}from"./ProjectCard-jUNXXA-6.js";import{S as s}from"./index-CQ_p7GJM.js";import{N as y}from"./purify.es-aAU0OPmd.js";import{T as k}from"./Button-NOuOPz7V.js";import"./x-DtsN5PD9.js";import"./useCategories-XbkYoYfQ.js";import"./search-xE4jIDTH.js";const v=()=>e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-md overflow-hidden flex flex-col h-full",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx(s,{height:192,className:"w-full"})," "]}),e.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 line-clamp-2",children:e.jsx(s,{width:"80%"})}),e.jsx("p",{className:"text-sm mb-4 line-clamp-3",children:e.jsx(s,{count:3})}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-auto mb-3",children:[e.jsx(s,{width:60,height:20,className:"rounded-full"}),e.jsx(s,{width:60,height:20,className:"rounded-full"}),e.jsx(s,{width:40,height:20,className:"rounded-full"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsx(s,{width:100,height:32}),e.jsx(s,{circle:!0,width:32,height:32})]})]})]});function P({searchQuery:o="",selectedCategory:r}){const[i,h]=a.useState([]),[m,n]=a.useState(!0),[x,d]=a.useState(null),[j,u]=a.useState(!1);a.useEffect(()=>{(async()=>{n(!0);try{let t=N.from("projects").select("*").order("created_at",{ascending:!1});const l=o.trim();l&&r?t=t.filter("categories","cs",`["${r}"]`).or(`title.ilike.%${l}%,slug.ilike.%${l}%`):r?t=t.filter("categories","cs",`["${r}"]`):l&&(t=t.or(`title.ilike.%${l}%,slug.ilike.%${l}%,categories.cs.["${l}"]`));const{data:p,error:f}=await t;if(f)throw f;h(p||[])}catch(t){console.error("Error fetching projects:",t),b.error("Failed to load projects")}finally{n(!1)}})()},[o,r]);const g=c=>{d(c),u(!0)};return m?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((c,t)=>e.jsx(v,{},t))}):i.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h3",{className:"text-xl font-medium text-neutral-700 dark:text-neutral-200 mb-2",children:"No projects found"}),e.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:o||r?"Try adjusting your search or filters":"Projects will appear here once they are added"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:i.map(c=>e.jsx(w,{project:c,onShare:g},c.id))}),x&&e.jsx(S,{isOpen:j,onClose:()=>u(!1),project:x})]})}function Q(){const[o,r]=a.useState(""),[i,h]=a.useState(null),m=a.useDeferredValue(o),n=d=>{r(d)},x=d=>{h(d)};return e.jsxs("div",{className:"min-h-screen bg-background-light text-text-dark dark:bg-background-dark dark:text-text-light flex flex-col",children:[e.jsx(y,{onSearch:n,onCategorySelect:x,selectedCategory:i,showSearchAndCategories:!0}),e.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 flex-1",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-neutral-900 dark:text-neutral-50 mb-4",children:"All Projects"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-3xl",children:"Browse through our complete collection of projects. Use the search bar and category filters to find what you need."})]}),e.jsx(P,{searchQuery:m,selectedCategory:i})]}),e.jsx("footer",{className:"bg-white dark:bg-neutral-900 border-t border-gray-200 dark:border-neutral-800 py-8",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx(k,{}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-2",children:"Discover and share amazing projects."})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Â© ",new Date().getFullYear()," CopyShare. All rights reserved."]})]})})})]})}export{Q as default};
