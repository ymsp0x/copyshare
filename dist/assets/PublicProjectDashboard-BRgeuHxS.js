import{j as e,r as s,s as k,c as S}from"./index-C_StH8Xa.js";import{P as b}from"./ProjectCard-CoErAobi.js";import{S as a}from"./index-ByxTsHSS.js";import{S as y}from"./ShareModal-lqKR7S5j.js";import{N}from"./Navbar-B8v12bDF.js";import{T as w}from"./Logo-78aqCpXO.js";import"./Button-DNr2lDT6.js";import"./purify.es-CEVJ7K31.js";import"./createLucideIcon-DGqH6ZsJ.js";import"./x-6WsZcU1B.js";import"./useCategories-Bx5K4rp5.js";import"./search-QBfONH2b.js";const v=()=>e.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-md overflow-hidden flex flex-col h-full",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx(a,{height:192,className:"w-full"})," "]}),e.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 line-clamp-2",children:e.jsx(a,{width:"80%"})}),e.jsx("p",{className:"text-sm mb-4 line-clamp-3",children:e.jsx(a,{count:3})}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-auto mb-3",children:[e.jsx(a,{width:60,height:20,className:"rounded-full"}),e.jsx(a,{width:60,height:20,className:"rounded-full"}),e.jsx(a,{width:40,height:20,className:"rounded-full"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsx(a,{width:100,height:32}),e.jsx(a,{circle:!0,width:32,height:32})]})]})]});function P({searchQuery:l="",selectedCategory:t}){const[o,m]=s.useState([]),[x,n]=s.useState(!0),[d,c]=s.useState(null),[f,g]=s.useState(!1);s.useEffect(()=>{(async()=>{n(!0),console.log("ProjectGrid: Fetching projects with searchQuery:",l,"selectedCategory:",t);try{let r=k.from("projects").select("*").not("categories","cs",'["Airdrop"]').order("created_at",{ascending:!1});const h=l.trim();h&&t?r=r.filter("categories","cs",`["${t}"]`).or('title.ilike.%<span class="math-inline">{trimmedSearchQuery}%,slug.ilike.%</span>{trimmedSearchQuery}%'):t?r=r.filter("categories","cs",`["${t}"]`):h&&(r=r.or(`title.ilike.%<span class="math-inline">{trimmedSearchQuery}%,slug.ilike.%</span>{trimmedSearchQuery}%,categories.cs.["${h}"]`));const{data:j,error:u}=await r;if(u)throw console.error("ProjectGrid: Supabase fetch error:",u),u;console.log("ProjectGrid: Raw data from Supabase:",j),m(j||[])}catch(r){console.error("ProjectGrid: Error fetching projects:",r),S.error("Failed to load projects")}finally{n(!1)}})()},[l,t]);const p=i=>{c(i),g(!0)};return x?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((i,r)=>e.jsx(v,{},r))}):o.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h3",{className:"text-xl font-medium text-neutral-700 dark:text-neutral-200 mb-2",children:"No projects found"}),e.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:l||t?"Try adjusting your search or filters":"Projects will appear here once they are added"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map(i=>e.jsx(b,{project:i,onShare:p},i.id))}),d&&e.jsx(y,{isOpen:f,onClose:()=>g(!1),project:d})]})}function _(){const[l,t]=s.useState(""),[o,m]=s.useState(null),x=s.useDeferredValue(l),n=c=>{t(c)},d=c=>{m(c)};return e.jsxs("div",{className:"min-h-screen bg-background-light text-text-dark dark:bg-background-dark dark:text-text-light flex flex-col",children:[e.jsx(N,{onSearch:n,onCategorySelect:d,selectedCategory:o,showSearchAndCategories:!0}),e.jsxs("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 flex-1",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-neutral-900 dark:text-neutral-50 mb-4",children:"Semua Proyek"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-3xl",children:"Jelajahi koleksi lengkap proyek kami. Gunakan bilah pencarian dan filter kategori untuk menemukan apa yang Anda cari."})]}),e.jsx(P,{searchQuery:x,selectedCategory:o})]}),e.jsx("footer",{className:"bg-white dark:bg-neutral-900 border-t border-gray-200 dark:border-neutral-800 py-8",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx(w,{}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-2",children:"Temukan dan bagikan proyek menakjubkan."})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Â© ",new Date().getFullYear()," CopyShare. Semua hak dilindungi."]})]})})})]})}export{_ as default};
